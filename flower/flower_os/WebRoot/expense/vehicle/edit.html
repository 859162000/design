<form name="editForm" method="post" ng-submit="save()" class="form-horizontal" novalidate="novalidate">
	<div class="portlet light bordered">
		<div class="portlet-title" app-print-hide>
			<div class="caption">
				<i class="fa fa-edit"></i> <span class="caption-subject sbold uppercase bold"> <span
					app-locale="expense.vehicle">车辆报销</span> <small ng-bind="current.entity.id"></small>
				</span> <span class="caption-helper"></span>
			</div>
			<div class="actions" ng-include=" 'resources/template/application/edit/actions.html' "></div>
		</div>
		<div class="portlet-body form">
			<div class="form-body app-body">
				<div class="row">
					<div class="col-md-12" ng-include=" 'resources/template/application/edit/header.html' "></div>
				</div>

				<div class="row">
					<!-- 支付信息 -->
					<div class="col-md-12" ng-include=" 'resources/template/application/edit/payee.html' "></div>
				</div>

				<div class="row">
					<div class="col-md-12">
						<h4 class="form-section">
							<span app-locale="expense.vehicle.details">车辆费用明细</span> <small><a href="javascript:;"
								ng-click="addItem()" title="{{ 'app.add' | appLocale }}"><i class="fa fa-plus"></i></a></small>
						</h4>
						<div class="table-responsive">
							<table class="table table-striped table-bordered table-condensed" role="grid">
								<thead>
									<tr>
										<th width="30" class="text-center row-number">#</th>
										<th width="180" app-locale="budget.dept">预算中心</th>
										<th width="180" app-locale="application.cost.dept">成本中心</th>
										<th width="100" app-locale="setting.vehicle.type">车辆类型</th>
										<th width="180" app-locale="setting.vehicle.license">车牌号</th>
										<th app-locale="setting.vehicleET.dept">车辆使用部门</th>
										<th app-locale="setting.vehicleET.operate">车辆使用人</th>
										<th app-locale="setting.vehicleET.deadline">费用所属期</th>
										<th app-locale="setting.vehicleET.et">车辆费用类别</th>
										<th app-locale="application.amount">金额</th>
										<th app-locale="budget.subject">预算科目</th>
										<th class="text-center row-actions"><a href="javascript:;" ng-click="clearItems()"
											title="{{ 'app.remove.all' | appLocale }}"><i class="fa fa-remove"></i></a> <a href="javascript:;"
											ng-click="addItem()" title="{{ 'app.add' | appLocale }}"><i class="fa fa-plus"></i></a></th>
									</tr>
								</thead>
								<tbody class="table-form">
									<tr ng-repeat="item in current.entity.items track by item.ordinal">
										<td class="row-number" ng-bind="$index+1"></td>
										<td>
											<div class="input-group dropdown" uib-dropdown auto-close="outsideClick" dropdown-append-to-body="true">
												<ul class="ztree dropdown-menu dropdown-menu-default" role="menu" uib-dropdown-menu ztree
													ng-model="item.budgetDept" data-url="/system/dept/load.do"></ul>
												<input ng-model="item.budgetDept.name" class="form-control input-sm" readonly uib-dropdown-open>
												<div class="input-group-btn btn-group-sm">
													<button type="button" class="btn btn-default btn-sm dropdown-toggle" uib-dropdown-toggle>
														<span class="caret"></span><span class="sr-only"></span>
													</button>
												</div>
											</div>
										</td>
										<td>
											<div class="input-group dropdown" uib-dropdown auto-close="outsideClick" dropdown-append-to-body="true">
												<ul class="ztree dropdown-menu dropdown-menu-default" role="menu" uib-dropdown-menu ztree
													ng-model="item.costDept" data-url="/system/dept/load.do"></ul>
												<input ng-model="item.costDept.name" class="form-control input-sm" readonly uib-dropdown-open>
												<div class="input-group-btn btn-group-sm">
													<button type="button" class="btn btn-default btn-sm dropdown-toggle" uib-dropdown-toggle>
														<span class="caret"></span><span class="sr-only"></span>
													</button>
												</div>
											</div>
										</td>

										<td>
											<div class="col-sm-12" app-dict-select="item.propertyC00" dict-type="vehicleType" required="true"
												change="changeAdvanceType(item);changeVehicleType(this, current.entity.items);" inline="true"></div>
										</td>
										<td>
											<div ng-if="'2' != item.propertyC00" class="col-sm-12" app-ui-select="item.vehicle" use-property=false 
													change="changeVehicle(item)" url="/vehicle.do" property="code" show-property="code" required="true"></div>
											<input ng-if="'2' == item.propertyC00"  class="form-control input-sm" ng-model="item.propertyC01" ng-blur="findCode(item)"
												ng-trim="true" required ng-maxlength="20">
										</td>
										<td>
											<input class="form-control input-sm" ng-model="item.propertyC02" ng-trim="true" required
											ng-maxlength="50">
										</td>
										<td><input class="form-control input-sm" ng-model="item.propertyC03" ng-trim="true" required
											ng-maxlength="20"></td>
										<td><input type="month" class="form-control input-sm" ng-model="item.propertyD00" required
											uib-datepicker-popup is-open="openDatepicker" uib-datepicker-append-to-body="true"></td>
										<td>
											<div class="col-sm-12" app-dict-select="item.advanceType" dict-type="vehicleExpenseType" use-property=false 
													change="changeAdvanceType(item)" inline="true" required="true"></div>
										</td>
										<td><input model-type="number" class="form-control input-sm" min="0.01" required model-format="amount"
											ng-model="item.amount" ng-model-options="{ updateOn: 'blur' }" ng-change="changeAmount(item)"></td>
										<td app-show="item.budgetSubject.id" url="/budgetSubject.do" required></td>
										<td class="text-center row-actions"><a href="javascript:;" ng-click="removeItem(item)"
											title="{{ 'app.remove' | appLocale }}"><i class="fa fa-remove"></i></a> <a href="javascript:;"
											ng-click="addItem(item)" title="{{ 'application.item.copy' | appLocale }}"><i class="fa fa-copy"></i></a></td>
									</tr>
								</tbody>
								<tfoot>
									<tr class="info">
										<td colspan="10" app-locale="app.amount.total" class="text-right nowrap">合计金额</td>
										<td colspan="2" class="nowrap"
											ng-bind="current.entity.payee.amount | currency:current.entity.payee.currency.symbol"></td>
									</tr>
									<tr class="success" ng-if="app.currency.id != current.entity.payee.currency.id">
										<td colspan="10" app-locale="app.amount.total" class="text-right nowrap">人民币合计</td>
										<td colspan="2" class="nowrap" ng-bind="current.entity.amount | currency"></td>
									</tr>
								</tfoot>
							</table>
						</div>
					</div>
				</div>

				<div class="row">
					<!-- 附件，流程等信息 -->
					<div class="col-md-12">
						<div class="tabbable-custom" uib-tabset>
							<div uib-tab heading="{{ 'application.files' | appLocale }}">
								<div ng-include=" 'resources/template/application/edit/files.html' "></div>
							</div>
							<div uib-tab heading="{{ 'application.logs' | appLocale }}"
								ng-if="current.entity.status == STATUS.REJECTION || current.entity.status == STATUS.REJECTION_PAY">
								<div ng-include=" 'resources/template/application/logs.html' "></div>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12 text-center form-actions" app-print-hide ng-include=" 'resources/template/application/edit/buttons.html' "></div>
				</div>
			</div>
		</div>
	</div>

</form>